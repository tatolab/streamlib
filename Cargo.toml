[workspace]
resolver = "2"
members = [
    "libs/streamlib",           # All-in-one: core, apple, mcp, python (feature-gated)
    "libs/streamlib-macros",    # Procedural macros for reducing boilerplate
    "examples/simple-pipeline", # Example: Basic processing pipeline
    "examples/camera-display",  # Example: Camera capture and display
    "examples/camera-audio-recorder", # Example: Record camera + audio to MP4
    "examples/microphone-reverb-speaker", # Example: Audio processing with CLAP
    "examples/audio-mixer-demo", # Example: Mixing multiple audio streams
    "examples/webrtc-cloudflare-stream", # Example: WebRTC streaming to Cloudflare
    "examples/whep-player",     # Example: WHEP (WebRTC egress) player
    "examples/runtime-graph-json-demo",   # Example: Runtime graph JSON serialization
    "examples/graph-json-export",         # Example: Graph data structure JSON export (no runtime)
    # Note: news-cast is a standalone workspace (has its own [workspace] declaration)
]

[workspace.package]
version = "0.1.0"
edition = "2021"
authors = ["Jonathan Fontanez <fontanezj1@gmail.com>"]
license-file = "LICENSE"
repository = "https://github.com/tato123/streamlib"

[workspace.dependencies]
# Core dependencies
thiserror = "2.0.17"
anyhow = "1.0.100"
tracing = "0.1.41"
tokio = { version = "1.48.0", features = ["full"] }

# Serialization
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
serde_yaml = "0.9"

# Platform bindings (objc2 ecosystem - latest versions)
# Note: All objc2 crates must use compatible versions
objc2 = "0.6.3"
objc2-metal = "0.3.2"
objc2-io-surface = "0.3.2"
objc2-core-video = "0.3.2"
objc2-core-media = "0.3.2"
objc2-foundation = "0.3.2"
objc2-av-foundation = "0.3.2"
objc2-app-kit = "0.3.2"
objc2-quartz-core = "0.3.2"
objc2-core-text = "0.3.2"
objc2-core-graphics = "0.3.2"
libc = "0.2.177"

# Shader compilation
# TODO: Add when implementing HLSL shader compilation:
#   - hassle-rs (DXC wrapper for HLSL → SPIR-V)
#   - spirv-cross-rs (SPIR-V → Metal/Vulkan)

# Python bindings
pyo3 = { version = "0.27.0", features = ["extension-module"] }

# WebRTC
str0m = "0.11.1"

# HTTP/Web
axum = "0.8.6"
tower-http = "0.6.6"
hyper = "1.7.0"

# WebGPU (cross-platform GPU abstraction)
# Using 25.0.2 for compatibility with vello 0.5.0 and pygfx ecosystem
wgpu = "25.0.2"
wgpu-hal = "25.0.2"

# YUV/RGB conversion - REMOVED (now using GPU-accelerated VTPixelTransferSession)
# yuv = "0.8"
